{% macro navlink(display, tab_id, style='') %}
<a href="#"
   class="tablink {{ style }}"
   onclick="openTab('{{ tab_id }}')"
   >{{ display }}</a>
{% endmacro %}

<!doctype html>
<html>
    <head>
        <title>{{ title }}</title>
        <meta charset="utf-8">

        <link rel="icon" type="image/png" sizes="16x16" href="{{ static_ref('images/favicon-16x16.png') }}">
        <link rel="icon" type="image/png" sizes="32x32" href="{{ static_ref('images/favicon-32x32.png') }}">
        <link rel="icon" type="image/png" sizes="96x96" href="{{ static_ref('images/favicon-96x96.png') }}">

        <script src="{{ static_lib('jquery-3.2.1.min.js') }}"></script>
        <script src="{{ static_lib('jquery-ui.min.js') }}"></script>
        <script src="{{ static_lib('plotly-latest.min.js') }}"></script>
        <script src="{{ static_lib('katex.min.js') }}"></script>
        <script src="{{ static_lib('auto-render.min.js') }}"></script>
        <script src="{{ static_ref('pygsti_plotly_ex.js') }}"></script>
        <script src="{{ static_ref('pygsti_dashboard.lite.js') }}"></script>

        <link rel="stylesheet" href="{{ static_lib('smoothness-jquery-ui.css') }}">
        <link rel="stylesheet" href="{{ static_lib('katex.css') }}">
        <link rel="stylesheet" href="{{ static_ref('pygsti_dataviz.css') }}">
        <link rel="stylesheet" href="{{ static_ref('pygsti_dashboard.lite.css') }}">
        <link rel="stylesheet" href="{{ static_ref('pygsti_fonts.css') }}">

    </head>

    <body>
        <div id="content-wrapper">
            <div id="theSidenav" class="sidenav loadable notloaded">
                <!-- REMOVEME -->
                <!-- <a href="javascript:void(0)" id="tackbtn" title="Toggle navigation bar auto-hide" onclick="tackNav()">&#8859;</a> -->
                <div class="linkgroup">
                    {{ navlink('Summary', 'Summary', style='linkgroupheading active') }}
                </div>

                {% if config['BrevityLT4'] %}
                <div class="linkgroup">
                    <p class="linkgroupheading" onclick="$(this).next('a')[0].click();">Model Violation</p>
                    {{ navlink('Overview', 'Goodness') }}

                    {% if config['BrevityLT1'] %}
                    {{ navlink('Per-sequence detail', 'Goodness_colorboxplot') }}

                    {% if config['ShowScaling'] %}
                    {{ navlink('Robust data scaling', 'Goodness_scaling') }}
                    {% endif %}

                    {% if config['ShowUnmodeledError'] %}
                    {{ navlink('Unmodeled error', 'Goodness_unmodeled') }}
                    {% endif %}

                    {% endif %}
                </div>

                <div class="linkgroup">
                    <p class="linkgroupheading" onclick="$(this).next('a')[0].click();">Gauge Invariant Error Metrics</p>
                    {{ navlink('Overview', 'GaugeInvariants_gates') }}

                    {% if config['BrevityLT3'] %}
                    {{ navlink('Germs Detail', 'GaugeInvariants_germs') }}
                    {% endif %}

                    {% if config['CompareDatasets'] %}
                    {{ navlink('Data Comparison', 'DataComparison') }}
                    {% endif %}

                    {% if config['IdleTomography'] %}
                    {{ navlink('Idle Tomography', 'IdleTomography') }}
                    {% endif %}
                </div>

                <div class="linkgroup">
                    <p class="linkgroupheading" onclick="$(this).next('a')[0].click();">Gauge Dependent Error Metrics</p>
                    {{ navlink('Overview', 'GaugeVariants') }}
                    {{ navlink('Raw Estimates', 'GaugeVariants_raw') }}
                    {{ navlink('Gate Decompositions', 'GaugeVariants_decomp') }}
                    {{ navlink('Gate Error Generators', 'GaugeVariants_errgen') }}
                </div>

                {% if config['BrevityLT2'] %}
                <div class="linkgroup">
                    <p class="linkgroupheading" onclick="$(this).next('a')[0].click();">For Reference</p>
                    {{ navlink('Input Reference', 'Input') }}
                    {{ navlink('System Reference', 'Meta') }}
                </div>
                {% endif %}

                {% endif %}

                <div class="linkgroup">
                    {{ navlink('Help', 'Help', style='linkgroupheading') }}
                </div>

                <!-- TODO -->
                {{ topSwitchboard|render }}

                <!-- TODO -->
                {{ bestGatesetGaugeOptParamsTable|render }}
            </div>

            <div id="main-wrapper">
                <header class="header" role="banner">
      	            <H1 class="title">{{ title }}</h1>
	                <h2 class="author">generated by pyGSTi on {{ date }}</h2>
                </header>
                <div id="main">
                    <!-- TODO clean this up / generalize -->
                    <div id="Summary" class="tabcontent loadable notloaded active">
                        {% include 'tabs/Summary.html' %}
                    </div>

                    {% if config['BrevityLT4'] %}
                    <div id="Goodness" class="tabcontent loadable notloaded">
                        {% include 'tabs/Goodness.html' %}
                    </div>

                    {% if config['BrevityLT1'] %}
                    <div id="Goodness_colorboxplot" class="tabcontent loadable notloaded">
                        {% include 'tabs/Goodness_colorboxplot.html' %}
                    </div>

                    {% if config['ShowScaling'] %}
                    <div id="Goodness_scaling" class="tabcontent loadable notloaded">
                        {% include 'tabs/Goodness_scaling.html' %}
                    </div>
                    {% endif %}

                    {% if config['ShowUnmodeledError'] %}
                    <div id="Goodness_unmodeled" class="tabcontent loadable notloaded">
                        {% include 'tabs/Goodness_unmodeled.html' %}
                    </div>
                    {% endif %}

                    {% endif %}


                    <div id="GaugeInvariants_gates" class="tabcontent loadable notloaded">
                        {% include 'tabs/GaugeInvariants_gates.html' %}
                    </div>

                    {% if config['BrevityLT3'] %}
                    <div id="GaugeInvariants_germs" class="tabcontent loadable notloaded">
                        {% include 'tabs/GaugeInvariants_germs.html' %}
                    </div>
                    {% endif %}

                    {% if config['CompareDatasets'] %}
                    <div id="DataComparison" class="tabcontent loadable notloaded">
                        {% include 'tabs/DataComparison.html' %}
                    </div>
                    {% endif %}

                    {% if config['IdleTomography'] %}
                    <div id="IdleTomography" class="tabcontent loadable notloaded">
                        {% include 'tabs/IdleTomography.html' %}
                    </div>
                    {% endif %}


                    <div id="GaugeVariants" class="tabcontent loadable notloaded">
                        {% include 'tabs/GaugeVariants.html' %}
                    </div>
                    <div id="GaugeVariants_raw" class="tabcontent loadable notloaded">
                        {% include 'tabs/GaugeVariants_raw.html' %}
                    </div>
                    <div id="GaugeVariants_decomp" class="tabcontent loadable notloaded">
                        {% include 'tabs/GaugeVariants_decomp.html' %}
                    </div>
                    <div id="GaugeVariants_errgen" class="tabcontent loadable notloaded">
                        {% include 'tabs/GaugeVariants_errgen.html' %}
                    </div>


                    {% if config['BrevityLT2'] %}
                    <div id="Input" class="tabcontent loadable notloaded">
                        {% include 'tabs/Input.html' %}
                    </div>
                    <div id="Meta" class="tabcontent loadable notloaded">
                        {% include 'tabs/Meta.html' %}
                    </div>
                    {% endif %}

                    <div id="Help" class="tabcontent loadable notloaded">
                        {% include 'tabs/Help.html' %}
                    </div>
                    {% endif %}
                </div>
                <div id="status">
                    No message
                </div>
            </div>
        </div>
    </body>

    <script>
      $(document).ready(function() {
          //Load sidebar, then active tab (and that's it!)
          load_contents_if_necessary('theSidenav')  // always active
          load_contents_if_necessary('Summary')  // the active tab (see 'active' class below)
      });
    </script>
</html>
